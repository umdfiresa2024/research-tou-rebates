---
title: "What is the impact of EV TOU Rebate on EV Sales in Maryland"
format: gfm
editor: visual
---

# Introduction:

With almost a third of CO2 emissions in Maryland generated by cars reducing these emissions is crucial for the state’s climate goals (“Maryland Clean Cars Program.”). A significant barrier to widespread electric vehicle (EV) adoption, however, is the cost. Time-of-Use (TOU) rebates, which incentivize EV owners to charge during off-peak hours, offer a strategic approach to lowering the operational costs of EV ownership. Maryland has implemented TOU rebates to encourage residents to charge their vehicles when electricity is cheaper, easing grid strain and making EVs more affordable. This research investigates the impact of Maryland’s TOU rebates on EV adoption, aiming to assess the program’s effectiveness. By understanding this relationship, Maryland policymakers can enhance rebate programs and serve as a model for other states. This approach supports the accelerated transition to EVs, reduction in emissions, and advancement of clean energy goals nationwide.

# Literature Review:

There have been several studies that answer the question of the impact of TOU pricing on EV charging behavior and adoption. The findings are mixed. Some of the studies conducted reveal that TOU pricing has shifted towards charging to off-peak hours. Others however, like the NBER study (Burlig et al. 2024) find that while TOU pricing shifted EV charging behavior away from traditional peak hours, it unintentionally led to new peak periods, straining transformer-level capacity. There is no universal consensus because there are several factors that can influence the outcome, for example, vehicle type and user demographics. This shows that future research is needed so that TOU programs can better support EV adoption. We want to fill gaps by analyzing the relationship between TOU rebates and EV adoption rates in Maryland.

Step 1. Install necessary packages.

```{r}
#| message: false
#| warning: false
#install.packages("tidyverse")
#install.packages("kableExtra")
```

Step 2. Declare that you will use these packages in this session.

```{r}
#| message: false
#| warning: false
library("tidyverse")
library("kableExtra")
```

Step 3. Upload the dataframe that you have created in Spring 2024 into the repository.

Step 4. Open the dataframe into the RStudio Environment.

```{r}
df<-read.csv("panel.csv")
```

Step 5. Use the **head** and **kable** function showcase the first 10 rows of the dataframe to the reader.

```{r}
kable(head(df))
```

## Question 1: What is the frequency of this data frame?

Answer: monthly

## Question 2: What is the cross-sectional (geographical) unit of this data frame?

Answer: Electric company

```{r}
table(df$Company)
```

Step 6. Use the **names** function to display all the variables (column) in the dataframe.

```{r}
names(df) 
```

## Question 3: Which column represents the treatment variable of interest?

Answer: EVTOURebate

## Question 4: Which column represents the outcome variable of interest?

Answer: EVs

Step 7: Create a boxplot to visualize the distribution of the outcome variable under treatment and no treatment.

```{r}

ggplot(df, aes(x=as.Date(Date), y=EVs, col=Company)) + geom_line() +
  geom_vline(xintercept=as.Date(as.Date("2021-07-01")), col="pink", linetype="dashed", lwd=1) +
  geom_vline(xintercept=as.Date(as.Date("2022-11-01")), col="lightblue", linetype="dashed", lwd=1) +
  theme_bw()
```

Step 8: Fit a regression model $y=\beta_0 + \beta_1 x + \epsilon$ where $y$ is the outcome variable and $x$ is the treatment variable. Use the **summary** function to display the results.

```{r}
df2<-df %>%
  mutate(BGE = ifelse(Company == "Baltimore Gas & Electric Co", 1, 0)) %>%
  mutate(TOU_time=ifelse(as.Date(Date)>as.Date("2021-07-01"),1,0))

model1<-lm(EVs ~ TOU_time * BGE + as.factor(Date), data=df2)

summary(model1)
```

## Question 5: What is the predicted value of the outcome variable when treatment=0?

Answer: 7900

## Question 6: What is predicted value of the outcome variable when treatment=1?

Answer: 7900 + 27954 + 3223 + 6332 = 45,419

## Question 7: What is the equation that describes the linear regression above? Please include an explanation of the variables and subscripts.

Answer: $ev_{ct} = \beta_0 + \beta_1 TOUTime_{t} + \beta_2 BGE_{c} + \beta3TOU_{c}*BGE_{t} + \alpha_{Date} + \epsilon_{ct}$

## Question 8: What fixed effects can be included in the regression? What does each fixed effects control for? Please include a new equation that incorporates the fixed effects.

Answer: Date fix effects

## Question 9: What is the impact of the treatment effect once fixed effects are included?

Answer: 6332 EVs

# Questions for Week 5

## Question 10: What are the next steps of your research?

Take into account-

1.  difference in gas prices between both companies
2.  difference in used car prices between Potomac area and Baltimore area
3.  EV dealerships being before July 2021

Step 9: Change the document format to gfm

Step 10: Save this document as README.qmd

Step 11: Render the document. README.md file should be created after this process.

Step 12: Push the document back to GitHub and observe your beautiful document in your repository!

Step 13: If your team has a complete dataframe that includes both the treated and outcome variable, you are done with the assignment. If not, make a research plan in Notion to collect data on the outcome and treatment variable and combine it into one dataframe.

# Bibliography 

Electric Vehicles and the Energy Transition: Unintended Consequences of a Common Retail Rate Design \| NBER. (2024). *NBER*. https://www.nber.org/papers/w32886

Maryland Clean Cars Program. (n.d.). *Department of the Environment*. Retrieved November 4, 2024, from http://mde.maryland.gov/programs/Air/MobileSources/Pages/CleanCars.aspx
